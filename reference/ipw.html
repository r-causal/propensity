<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Inverse Probability Weighted Estimation — ipw • propensity</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Inverse Probability Weighted Estimation — ipw"><meta name="description" content="ipw() is a bring-your-own-model (BYOM) inverse probability weighted
estimator for causal inference. You supply a fitted propensity score model
and a fitted weighted outcome model; ipw() computes causal effect estimates
with standard errors that correctly account for the two-step estimation
process.
ipw() currently supports binary exposures with binary or continuous
outcomes. For binary outcomes, it returns the risk difference, log risk
ratio, and log odds ratio. For continuous outcomes, it returns the difference
in means."><meta property="og:description" content="ipw() is a bring-your-own-model (BYOM) inverse probability weighted
estimator for causal inference. You supply a fitted propensity score model
and a fitted weighted outcome model; ipw() computes causal effect estimates
with standard errors that correctly account for the two-step estimation
process.
ipw() currently supports binary exposures with binary or continuous
outcomes. For binary outcomes, it returns the risk difference, log risk
ratio, and log odds ratio. For continuous outcomes, it returns the difference
in means."><meta property="og:image" content="https://r-causal.github.io/propensity/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">propensity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/propensity.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-causal/propensity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Inverse Probability Weighted Estimation</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-causal/propensity/blob/main/R/ipw.R" class="external-link"><code>R/ipw.R</code></a></small>
      <div class="d-none name"><code>ipw.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>ipw()</code> is a bring-your-own-model (BYOM) inverse probability weighted
estimator for causal inference. You supply a fitted propensity score model
and a fitted weighted outcome model; <code>ipw()</code> computes causal effect estimates
with standard errors that correctly account for the two-step estimation
process.</p>
<p><code>ipw()</code> currently supports binary exposures with binary or continuous
outcomes. For binary outcomes, it returns the risk difference, log risk
ratio, and log odds ratio. For continuous outcomes, it returns the difference
in means.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ipw</span><span class="op">(</span></span>
<span>  <span class="va">ps_mod</span>,</span>
<span>  <span class="va">outcome_mod</span>,</span>
<span>  .data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimand <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ps_link <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ipw'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span>, row.names <span class="op">=</span> <span class="cn">NULL</span>, optional <span class="op">=</span> <span class="cn">NULL</span>, exponentiate <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ps-mod">ps_mod<a class="anchor" aria-label="anchor" href="#arg-ps-mod"></a></dt>
<dd><p>A fitted propensity score model of class <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code>,
typically a logistic regression with the exposure as the left-hand side of
the formula.</p></dd>


<dt id="arg-outcome-mod">outcome_mod<a class="anchor" aria-label="anchor" href="#arg-outcome-mod"></a></dt>
<dd><p>A fitted weighted outcome model of class <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code>
or <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code>, with the outcome as the dependent variable and
propensity score weights supplied via the <code>weights</code> argument. The weights
should be created with a propensity weight function such as <code><a href="wt_ate.html">wt_ate()</a></code>.</p></dd>


<dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A data frame containing the exposure, outcome, and covariates.
If <code>NULL</code> (the default), <code>ipw()</code> extracts data from the model objects.
Supply <code>.data</code> explicitly if the outcome model formula contains
transformations that prevent extraction of the exposure variable from
<code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">stats::model.frame()</a></code>.</p></dd>


<dt id="arg-estimand">estimand<a class="anchor" aria-label="anchor" href="#arg-estimand"></a></dt>
<dd><p>A character string specifying the causal estimand: <code>"ate"</code>,
<code>"att"</code>, <code>"ato"</code>, or <code>"atm"</code>. If <code>NULL</code>, the estimand is inferred from the
weights in <code>outcome_mod</code>. Auto-detection requires weights created with
<code><a href="wt_ate.html">wt_ate()</a></code>, <code><a href="wt_ate.html">wt_att()</a></code>, <code><a href="wt_ate.html">wt_atm()</a></code>, or <code><a href="wt_ate.html">wt_ato()</a></code>.</p></dd>


<dt id="arg-ps-link">ps_link<a class="anchor" aria-label="anchor" href="#arg-ps-link"></a></dt>
<dd><p>A character string specifying the link function used in the
propensity score model: <code>"logit"</code>, <code>"probit"</code>, or <code>"cloglog"</code>. Defaults to
the link used by <code>ps_mod</code>.</p></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>Confidence level for intervals. Default is <code>0.95</code>.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An <code>ipw</code> object.</p></dd>


<dt id="arg-row-names-optional-">row.names, optional, ...<a class="anchor" aria-label="anchor" href="#arg-row-names-optional-"></a></dt>
<dd><p>Passed to <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">base::as.data.frame()</a></code>.</p></dd>


<dt id="arg-exponentiate">exponentiate<a class="anchor" aria-label="anchor" href="#arg-exponentiate"></a></dt>
<dd><p>If <code>TRUE</code>, exponentiate the log risk ratio and log odds
ratio to produce risk ratios and odds ratios on their natural scale. The
confidence interval bounds are also exponentiated. Standard errors, z
statistics, and p-values remain on the log scale. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An S3 object of class <code>ipw</code> with the following components:</p><dl><dt><code>estimand</code></dt>
<dd><p>The causal estimand: one of <code>"ate"</code>, <code>"att"</code>, <code>"ato"</code>,
or <code>"atm"</code>.</p></dd>

<dt><code>ps_mod</code></dt>
<dd><p>The fitted propensity score model.</p></dd>

<dt><code>outcome_mod</code></dt>
<dd><p>The fitted outcome model.</p></dd>

<dt><code>estimates</code></dt>
<dd><p>A data frame with one row per effect measure and the
following columns: <code>effect</code> (the measure name), <code>estimate</code> (point
estimate), <code>std.err</code> (standard error), <code>z</code> (z-statistic),
<code>ci.lower</code> and <code>ci.upper</code> (confidence interval bounds),
<code>conf.level</code>, and <code>p.value</code>.</p></dd>


</dl><p><code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> returns the <code>estimates</code> component as a data
frame. When <code>exponentiate = TRUE</code>, the <code>log(rr)</code> and <code>log(or)</code> rows are
transformed: point estimates and confidence limits are exponentiated and
the effect labels become <code>"rr"</code> and <code>"or"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a></h2>
    <p><code>ipw()</code> is designed around a three-step workflow:</p><ol><li><p>Fit a propensity score model (e.g., logistic regression of exposure on
confounders).</p></li>
<li><p>Calculate propensity score weights for your estimand (e.g., <code><a href="wt_ate.html">wt_ate()</a></code>)
and fit a weighted outcome model.</p></li>
<li><p>Pass both models to <code>ipw()</code> to obtain causal effect estimates with
correct standard errors.</p></li>
</ol><p>You are responsible for specifying and fitting both models. <code>ipw()</code> handles
the variance estimation.</p>
    </div>
    <div class="section level2">
    <h2 id="effect-measures">Effect measures<a class="anchor" aria-label="anchor" href="#effect-measures"></a></h2>
    <p>For binary outcomes (<code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code> with <code>family = binomial()</code>), <code>ipw()</code>
returns three effect measures:</p><ul><li><p><code>rd</code>: Risk difference (marginal risk in exposed minus unexposed)</p></li>
<li><p><code>log(rr)</code>: Log risk ratio</p></li>
<li><p><code>log(or)</code>: Log odds ratio</p></li>
</ul><p>For continuous outcomes (<code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code> or <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code> with
<code>family = gaussian()</code>), only the difference in means (<code>diff</code>) is returned.</p>
<p>Use <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> with <code>exponentiate = TRUE</code> to obtain risk ratios and
odds ratios on their natural scale.</p>
    </div>
    <div class="section level2">
    <h2 id="variance-estimation">Variance estimation<a class="anchor" aria-label="anchor" href="#variance-estimation"></a></h2>
    <p>Standard errors are computed via linearization, which correctly accounts for
the uncertainty introduced by estimating propensity scores. This avoids the
known problem of underestimated standard errors that arises from treating
estimated weights as fixed. See Kostouraki et al. (2024) for details.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kostouraki A, Hajage D, Rachet B, et al. On variance estimation of the
inverse probability-of-treatment weighting estimator: A tutorial for
different types of propensity score weights. <em>Statistics in Medicine</em>.
2024;43(13):2672–2694. <a href="https://doi.org/10.1002/sim.10078" class="external-link">doi:10.1002/sim.10078</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="wt_ate.html">wt_ate()</a></code>, <code><a href="wt_ate.html">wt_att()</a></code>, <code><a href="wt_ate.html">wt_atm()</a></code>, <code><a href="wt_ate.html">wt_ato()</a></code> for calculating propensity
score weights.</p>
<p><code><a href="ps_trim.html">ps_trim()</a></code>, <code><a href="ps_trunc.html">ps_trunc()</a></code> for handling extreme propensity scores before
weighting.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Simulate data with a confounder, binary exposure, and binary outcome</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">0.5</span> <span class="op">*</span> <span class="va">x1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span> <span class="op">+</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">z</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> <span class="va">x1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">z</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 1: Fit a propensity score model</span></span></span>
<span class="r-in"><span><span class="va">ps_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">z</span> <span class="op">~</span> <span class="va">x1</span>, data <span class="op">=</span> <span class="va">dat</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 2: Calculate ATE weights and fit a weighted outcome model</span></span></span>
<span class="r-in"><span><span class="va">wts</span> <span class="op">&lt;-</span> <span class="fu"><a href="wt_ate.html">wt_ate</a></span><span class="op">(</span><span class="va">ps_mod</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Using exposure variable <span style="color: #0000BB;">"z"</span> from GLM model</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-in"><span><span class="va">outcome_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">z</span>, data <span class="op">=</span> <span class="va">dat</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span>, weights <span class="op">=</span> <span class="va">wts</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>non-integer #successes in a binomial glm!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 3: Estimate causal effects with correct standard errors</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ipw</span><span class="op">(</span><span class="va">ps_mod</span>, <span class="va">outcome_mod</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inverse Probability Weight Estimator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimand: ATE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Propensity Score Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Call: glm(formula = z ~ x1, family = binomial(), data = dat) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outcome Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Call: glm(formula = y ~ z, family = binomial(), data = dat, weights = wts) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         estimate std.err       z ci.lower ci.upper conf.level   p.value    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rd       0.14230 0.07038 2.02194   0.0044  0.28025       0.95 0.0431831 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> log(rr)  0.28031 0.10770 2.60262   0.0692  0.49141       0.95 0.0092513 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> log(or)  0.57339 0.16200 3.53950   0.2559  0.89090       0.95 0.0004009 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exponentiate log-RR and log-OR to get RR and OR</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span>, exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   effect  estimate   std.err        z    ci.lower  ci.upper conf.level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     rd 0.1423042 0.0703802 2.021935 0.004361509 0.2802468       0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     rr 1.3235458 0.1077045 2.602624 1.071669109 1.6346215       0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     or 1.7742759 0.1619980 3.539503 1.291600480 2.4373286       0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.0431831009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.0092513440</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.0004008815</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Continuous outcome example</span></span></span>
<span class="r-in"><span><span class="va">y_cont</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">z</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">y_cont</span> <span class="op">&lt;-</span> <span class="va">y_cont</span></span></span>
<span class="r-in"><span><span class="va">outcome_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_cont</span> <span class="op">~</span> <span class="va">z</span>, data <span class="op">=</span> <span class="va">dat</span>, weights <span class="op">=</span> <span class="va">wts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ipw</span><span class="op">(</span><span class="va">ps_mod</span>, <span class="va">outcome_cont</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inverse Probability Weight Estimator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimand: ATE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Propensity Score Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Call: glm(formula = z ~ x1, family = binomial(), data = dat) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outcome Model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Call: lm(formula = y_cont ~ z, data = dat, weights = wts) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      estimate std.err       z ci.lower ci.upper conf.level   p.value    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> diff  0.90057 0.13695 6.57579   0.6322    1.169       0.95 4.839e-11 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Malcolm Barrett.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

