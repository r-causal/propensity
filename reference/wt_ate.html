<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate propensity score weights — wt_ate • propensity</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate propensity score weights — wt_ate"><meta name="description" content='Compute inverse probability weights for causal inference under different
estimands. Each function targets a different population:
wt_ate(): Average Treatment Effect – the full population.
wt_att(): Average Treatment Effect on the Treated – the treated
(focal) group.
wt_atu(): Average Treatment Effect on the Untreated – the
untreated (reference) group. wt_atc() is an alias.
wt_atm(): Average Treatment Effect for the Evenly Matchable –
units with the most overlap.
wt_ato(): Average Treatment Effect for the Overlap Population –
weights proportional to overlap.
wt_entropy(): Entropy-weighted Average Treatment Effect –
an entropy-balanced population.
wt_cens(): Inverse probability of censoring weights – uses the
same formula as wt_ate() but labels the estimand "uncensored". Use
these to adjust for censoring in survival analysis, not for treatment
weighting.


.propensity accepts a numeric vector of predicted probabilities, a
data.frame of per-level probabilities, a fitted glm object, or a
modified propensity score created by ps_trim(), ps_trunc(),
ps_refit(), or ps_calibrate().
All functions return a psw object – a numeric vector that tracks the
estimand, stabilization status, and any trimming or truncation applied.'><meta property="og:description" content='Compute inverse probability weights for causal inference under different
estimands. Each function targets a different population:
wt_ate(): Average Treatment Effect – the full population.
wt_att(): Average Treatment Effect on the Treated – the treated
(focal) group.
wt_atu(): Average Treatment Effect on the Untreated – the
untreated (reference) group. wt_atc() is an alias.
wt_atm(): Average Treatment Effect for the Evenly Matchable –
units with the most overlap.
wt_ato(): Average Treatment Effect for the Overlap Population –
weights proportional to overlap.
wt_entropy(): Entropy-weighted Average Treatment Effect –
an entropy-balanced population.
wt_cens(): Inverse probability of censoring weights – uses the
same formula as wt_ate() but labels the estimand "uncensored". Use
these to adjust for censoring in survival analysis, not for treatment
weighting.


.propensity accepts a numeric vector of predicted probabilities, a
data.frame of per-level probabilities, a fitted glm object, or a
modified propensity score created by ps_trim(), ps_trunc(),
ps_refit(), or ps_calibrate().
All functions return a psw object – a numeric vector that tracks the
estimand, stabilization status, and any trimming or truncation applied.'><meta property="og:image" content="https://r-causal.github.io/propensity/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">propensity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/propensity.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-causal/propensity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate propensity score weights</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-causal/propensity/blob/main/R/weights.R" class="external-link"><code>R/weights.R</code></a></small>
      <div class="d-none name"><code>wt_ate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute inverse probability weights for causal inference under different
estimands. Each function targets a different population:</p><ul><li><p><code>wt_ate()</code>: <strong>Average Treatment Effect</strong> – the full population.</p></li>
<li><p><code>wt_att()</code>: <strong>Average Treatment Effect on the Treated</strong> – the treated
(focal) group.</p></li>
<li><p><code>wt_atu()</code>: <strong>Average Treatment Effect on the Untreated</strong> – the
untreated (reference) group. <code>wt_atc()</code> is an alias.</p></li>
<li><p><code>wt_atm()</code>: <strong>Average Treatment Effect for the Evenly Matchable</strong> –
units with the most overlap.</p></li>
<li><p><code>wt_ato()</code>: <strong>Average Treatment Effect for the Overlap Population</strong> –
weights proportional to overlap.</p></li>
<li><p><code>wt_entropy()</code>: <strong>Entropy-weighted Average Treatment Effect</strong> –
an entropy-balanced population.</p></li>
<li><p><code>wt_cens()</code>: <strong>Inverse probability of censoring weights</strong> – uses the
same formula as <code>wt_ate()</code> but labels the estimand <code>"uncensored"</code>. Use
these to adjust for censoring in survival analysis, not for treatment
weighting.</p></li>
</ul><p><code>.propensity</code> accepts a numeric vector of predicted probabilities, a
<code>data.frame</code> of per-level probabilities, a fitted <code>glm</code> object, or a
modified propensity score created by <code><a href="ps_trim.html">ps_trim()</a></code>, <code><a href="ps_trunc.html">ps_trunc()</a></code>,
<code><a href="ps_refit.html">ps_refit()</a></code>, or <code><a href="ps_calibrate.html">ps_calibrate()</a></code>.</p>
<p>All functions return a <code><a href="psw.html">psw</a></code> object – a numeric vector that tracks the
estimand, stabilization status, and any trimming or truncation applied.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">wt_ate</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  .sigma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stabilization_score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_ate</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  .sigma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stabilization_score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_att</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_att</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_atu</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_atu</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_atm</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_atm</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_ato</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_ato</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_entropy</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_entropy</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_atc</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wt_cens</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  .sigma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stabilization_score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">wt_cens</span><span class="op">(</span></span>
<span>  <span class="va">.propensity</span>,</span>
<span>  <span class="va">.exposure</span>,</span>
<span>  .sigma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"binary"</span>, <span class="st">"categorical"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>  .focal_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .reference_level <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stabilization_score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .propensity_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .treated <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .untreated <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--propensity">.propensity<a class="anchor" aria-label="anchor" href="#arg--propensity"></a></dt>
<dd><p>Propensity scores in one of several forms:</p><ul><li><p>A <strong>numeric vector</strong> of predicted probabilities (binary/continuous).</p></li>
<li><p>A <strong>data frame</strong> or matrix with one column per exposure level
(categorical), or two columns for binary (see <code>.propensity_col</code>).</p></li>
<li><p>A fitted <strong><code>glm</code></strong> object – fitted values are extracted automatically.</p></li>
<li><p>A modified propensity score created by <code><a href="ps_trim.html">ps_trim()</a></code>, <code><a href="ps_trunc.html">ps_trunc()</a></code>,
<code><a href="ps_refit.html">ps_refit()</a></code>, or <code><a href="ps_calibrate.html">ps_calibrate()</a></code>.</p></li>
</ul></dd>


<dt id="arg--exposure">.exposure<a class="anchor" aria-label="anchor" href="#arg--exposure"></a></dt>
<dd><p>The exposure (treatment) variable. For binary exposures, a
numeric 0/1 vector, logical, or two-level factor. For categorical
exposures, a factor or character vector. For continuous exposures, a
numeric vector. Optional when <code>.propensity</code> is a <code>glm</code> object (extracted
from the model).</p></dd>


<dt id="arg--sigma">.sigma<a class="anchor" aria-label="anchor" href="#arg--sigma"></a></dt>
<dd><p>Numeric vector of observation-level standard deviations for
continuous exposures (e.g., <code>influence(model)$sigma</code>). Extracted
automatically when <code>.propensity</code> is a <code>glm</code> object.</p></dd>


<dt id="arg-exposure-type">exposure_type<a class="anchor" aria-label="anchor" href="#arg-exposure-type"></a></dt>
<dd><p>Type of exposure: <code>"auto"</code> (default), <code>"binary"</code>,
<code>"categorical"</code>, or <code>"continuous"</code>. <code>"auto"</code> detects the type from
<code>.exposure</code>.</p></dd>


<dt id="arg--focal-level">.focal_level<a class="anchor" aria-label="anchor" href="#arg--focal-level"></a></dt>
<dd><p>The value of <code>.exposure</code> representing the focal
(treated) group. For binary exposures, defaults to the higher value.
Required for <code>wt_att()</code> and <code>wt_atu()</code> with categorical exposures.</p></dd>


<dt id="arg--reference-level">.reference_level<a class="anchor" aria-label="anchor" href="#arg--reference-level"></a></dt>
<dd><p>The value of <code>.exposure</code> representing the reference
(control) group. Automatically detected if not supplied.</p></dd>


<dt id="arg-stabilize">stabilize<a class="anchor" aria-label="anchor" href="#arg-stabilize"></a></dt>
<dd><p>If <code>TRUE</code>, multiply weights by an estimate of the marginal
treatment probability (binary) or density (continuous). Only supported by
<code>wt_ate()</code> and <code>wt_cens()</code>. See <strong>Stabilization</strong> in Details.</p></dd>


<dt id="arg-stabilization-score">stabilization_score<a class="anchor" aria-label="anchor" href="#arg-stabilization-score"></a></dt>
<dd><p>Optional numeric value to use as the
stabilization multiplier instead of the default (the marginal mean of
<code>.exposure</code>). Ignored when <code>stabilize = FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>


<dt id="arg--treated">.treated<a class="anchor" aria-label="anchor" href="#arg--treated"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>.focal_level</code> instead.</p></dd>


<dt id="arg--untreated">.untreated<a class="anchor" aria-label="anchor" href="#arg--untreated"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Use <code>.reference_level</code> instead.</p></dd>


<dt id="arg--propensity-col">.propensity_col<a class="anchor" aria-label="anchor" href="#arg--propensity-col"></a></dt>
<dd><p>Column to use when <code>.propensity</code> is a data frame
with a binary exposure. Accepts a column name (quoted or unquoted) or
numeric index. Defaults to the second column. Ignored for categorical
exposures, where all columns are used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="psw.html">psw</a></code> vector (a double vector with class <code>psw</code>) carrying
these attributes:</p><ul><li><p><code>estimand</code>: character, e.g. <code>"ate"</code>, <code>"att"</code>, <code>"uncensored"</code>.</p></li>
<li><p><code>stabilized</code>: logical, whether stabilization was applied.</p></li>
<li><p><code>trimmed</code>: logical, whether the propensity scores were trimmed.</p></li>
<li><p><code>truncated</code>: logical, whether the propensity scores were truncated.</p></li>
<li><p><code>calibrated</code>: logical, whether the propensity scores were calibrated.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="exposure-types">Exposure types<a class="anchor" aria-label="anchor" href="#exposure-types"></a></h3>


<p>All weight functions support binary exposures. <code>wt_ate()</code> and <code>wt_cens()</code>
also support continuous exposures. All except <code>wt_cens()</code> support
categorical exposures.</p><ul><li><p><strong>Binary</strong>: <code>.exposure</code> is a two-level vector (e.g., 0/1, logical, or a
two-level factor). <code>.propensity</code> is a numeric vector of P(treatment | X).</p></li>
<li><p><strong>Categorical</strong>: <code>.exposure</code> is a factor or character vector with 3+
levels. <code>.propensity</code> must be a matrix or data frame with one column per
level, where rows sum to 1.</p></li>
<li><p><strong>Continuous</strong>: <code>.exposure</code> is a numeric vector. <code>.propensity</code> is a
vector of conditional means (fitted values). Weights use a normal density
ratio; stabilization is strongly recommended.</p></li>
<li><p><strong>Auto</strong> (default): Detects the exposure type from <code>.exposure</code>.</p></li>
</ul></div>

<div class="section">
<h3 id="stabilization">Stabilization<a class="anchor" aria-label="anchor" href="#stabilization"></a></h3>


<p>Setting <code>stabilize = TRUE</code> multiplies the base weight by an estimate of
P(A) (binary) or f_A(A) (continuous), reducing variance. When no
<code>stabilization_score</code> is supplied, the marginal mean of <code>.exposure</code> is
used. Stabilization is supported for ATE and censoring weights
(<code>wt_ate()</code> and <code>wt_cens()</code>) and is strongly recommended for continuous
exposures.</p>
</div>

<div class="section">
<h3 id="handling-extreme-weights">Handling extreme weights<a class="anchor" aria-label="anchor" href="#handling-extreme-weights"></a></h3>


<p>Extreme weights signal positivity violations, poor model fit, or limited
overlap. You can address them by:</p><ul><li><p>Choosing an overlap-focused estimand (<code>wt_ato()</code>, <code>wt_atm()</code>,
<code>wt_entropy()</code>), which down-weight units in regions of poor overlap.</p></li>
<li><p>Trimming (<code><a href="ps_trim.html">ps_trim()</a></code>) or truncating (<code><a href="ps_trunc.html">ps_trunc()</a></code>) propensity scores
before computing weights.</p></li>
<li><p>Calibrating weights with <code><a href="ps_calibrate.html">ps_calibrate()</a></code>.</p></li>
<li><p>Stabilizing ATE weights (<code>stabilize = TRUE</code>).</p></li>
</ul><p>See the <a href="https://CRAN.R-project.org/package=halfmoon" class="external-link">halfmoon</a> package
for weight diagnostics and visualization.</p>
</div>

<div class="section">
<h3 id="weight-formulas">Weight formulas<a class="anchor" aria-label="anchor" href="#weight-formulas"></a></h3>

<div class="section">
<h4 id="binary-exposures">Binary exposures<a class="anchor" aria-label="anchor" href="#binary-exposures"></a></h4>


<p>For binary treatments (\(A \in \{0, 1\}\)), with propensity score
\(e(X) = P(A=1 \mid X)\):</p><ul><li><p><strong>ATE</strong>: \(w = \frac{A}{e(X)} + \frac{1-A}{1-e(X)}\)</p></li>
<li><p><strong>ATT</strong>: \(w = A + \frac{(1-A) \cdot e(X)}{1-e(X)}\)</p></li>
<li><p><strong>ATU</strong>: \(w = \frac{A \cdot (1-e(X))}{e(X)} + (1-A)\)</p></li>
<li><p><strong>ATM</strong>: \(w = \frac{\min(e(X), 1-e(X))}{A \cdot e(X) + (1-A) \cdot (1-e(X))}\)</p></li>
<li><p><strong>ATO</strong>: \(w = A \cdot (1-e(X)) + (1-A) \cdot e(X)\)</p></li>
<li><p><strong>Entropy</strong>: \(w = \frac{h(e(X))}{A \cdot e(X) + (1-A) \cdot (1-e(X))}\), where \(h(e) = -[e \log(e) + (1-e) \log(1-e)]\)</p></li>
</ul></div>

<div class="section">
<h4 id="continuous-exposures">Continuous exposures<a class="anchor" aria-label="anchor" href="#continuous-exposures"></a></h4>


<p>Weights use the density ratio
\(w = f_A(A) / f_{A|X}(A \mid X)\), where \(f_A\) is the marginal
density and \(f_{A|X}\) is the conditional density (both assumed
normal). Only <code>wt_ate()</code> and <code>wt_cens()</code> support continuous exposures.</p>
</div>

<div class="section">
<h4 id="categorical-exposures">Categorical exposures<a class="anchor" aria-label="anchor" href="#categorical-exposures"></a></h4>


<p>For \(K\)-level treatments, weights take the tilting-function form
\(w_i = h(\mathbf{e}_i) / e_{i,Z_i}\), where \(e_{i,Z_i}\) is the
propensity for unit \(i\)'s observed level and \(h(\cdot)\) depends
on the estimand:</p><ul><li><p><strong>ATE</strong>: \(h(\mathbf{e}) = 1\)</p></li>
<li><p><strong>ATT</strong>: \(h(\mathbf{e}) = e_{\text{focal}}\)</p></li>
<li><p><strong>ATU</strong>: \(h(\mathbf{e}) = 1 - e_{\text{focal}}\)</p></li>
<li><p><strong>ATM</strong>: \(h(\mathbf{e}) = \min(e_1, \ldots, e_K)\)</p></li>
<li><p><strong>ATO</strong>: \(h(\mathbf{e}) = \bigl(\sum_k 1/e_k\bigr)^{-1}\)</p></li>
<li><p><strong>Entropy</strong>: \(h(\mathbf{e}) = -\sum_k e_k \log(e_k)\)</p></li>
</ul></div>


</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Barrett, M., D'Agostino McGowan, L., &amp; Gerke, T. <em>Causal Inference in R</em>.
<a href="https://www.r-causal.org/" class="external-link">https://www.r-causal.org/</a></p>
<p>Rosenbaum, P. R., &amp; Rubin, D. B. (1983). The central role of the propensity
score in observational studies for causal effects. <em>Biometrika</em>, 70(1),
41–55.</p>
<p>Li, L., &amp; Greene, T. (2013). A weighting analogue to pair matching in
propensity score analysis. <em>The International Journal of Biostatistics</em>,
9(2), 215–234. (ATM weights)</p>
<p>Li, F., Morgan, K. L., &amp; Zaslavsky, A. M. (2018). Balancing covariates via
propensity score weighting. <em>Journal of the American Statistical
Association</em>, 113(521), 390–400. (ATO weights)</p>
<p>Zhou, Y., Matsouaka, R. A., &amp; Thomas, L. (2020). Propensity score weighting
under limited overlap and model misspecification. <em>Statistical Methods in
Medical Research</em>, 29(12), 3721–3756. (Entropy weights)</p>
<p>Hirano, K., &amp; Imbens, G. W. (2004). The propensity score with continuous
treatments. In <em>Applied Bayesian Modeling and Causal Inference from
Incomplete-Data Perspectives</em> (pp. 73–84).</p>
<p>Austin, P. C., &amp; Stuart, E. A. (2015). Moving towards best practice when
using inverse probability of treatment weighting (IPTW). <em>Statistics in
Medicine</em>, 34(28), 3661–3679.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="psw.html">psw()</a></code> for the returned weight vector class.</p></li>
<li><p><code><a href="ps_trim.html">ps_trim()</a></code>, <code><a href="ps_trunc.html">ps_trunc()</a></code>, <code><a href="ps_refit.html">ps_refit()</a></code>, and <code><a href="ps_calibrate.html">ps_calibrate()</a></code> for
modifying propensity scores before weighting.</p></li>
<li><p><code><a href="ipw.html">ipw()</a></code> for inverse-probability-weighted estimation of causal effects.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># -- Binary exposure, numeric propensity scores ----------------------</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0.1</span>, <span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span>, <span class="va">ps</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 1.492675 1.368655 1.745754 5.165661 1.173194 7.328950 2.094172 1.228599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [9] 1.847923 1.870179 7.433103 1.861044 1.557495 2.262990 1.223002 1.219720</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [17] 1.422212 7.482363 1.568225 1.157940 1.232086 1.528485 1.632905 1.116800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [25] 1.601115 3.001420 1.868276 1.738182 1.495501 1.278267 1.148871 5.612908</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [33] 2.878230 3.793252 1.135965 2.073670 3.410265 3.661309 2.820518 1.399190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [41] 1.272653 1.759439 1.757406 1.653101 4.505402 1.267499 1.401399 1.896705</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [49] 1.455134 1.271840 1.158299 1.830697 1.352924 1.246136 1.822296 1.360961</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 1.253173 1.423191 1.225436 1.665474 1.582048 1.213405 2.455942 1.469523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [65] 1.330297 1.847790 1.336806 1.333490 1.359668 1.824369 1.421302 1.657339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [73] 3.013373 1.111729 2.082235 1.381397 1.677439 1.694293 2.621656 1.232906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [81] 3.391031 1.576182 2.303524 1.368819 1.222930 1.811313 1.126170 1.227836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [89] 5.240410 4.165936 1.257160 1.606473 2.667996 1.598960 2.806635 1.333605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [97] 1.377723 1.211939 1.899058 2.037508</span>
<span class="r-in"><span><span class="fu">wt_att</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = att}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 0.4926755 1.0000000 0.7457538 4.1656608 1.0000000 1.0000000 1.0941724</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 1.0000000 1.0000000 0.8701789 6.4331026 0.8610445 1.0000000 1.2629898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 0.2230018 1.0000000 0.4222125 1.0000000 0.5682254 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 1.0000000 1.0000000 1.0000000 1.0000000 2.0014200 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 0.4955011 0.2782671 1.0000000 4.6129081 1.8782298 2.7932516 0.1359647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 1.0000000 2.4102647 1.0000000 1.0000000 0.3991897 0.2726533 0.7594392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 0.7574058 0.6531012 1.0000000 0.2674992 0.4013989 0.8967053 0.4551341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 1.0000000 0.1582988 0.8306973 1.0000000 0.2461361 1.0000000 0.3609610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 0.2531726 1.0000000 1.0000000 0.6654737 1.0000000 0.2134045 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 0.4695226 1.0000000 0.8477904 1.0000000 1.0000000 1.0000000 0.8243692</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 1.0000000 1.0000000 2.0133726 0.1117285 1.0000000 0.3813969 0.6774393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 1.0000000 1.0000000 0.2329063 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 0.2229300 0.8113126 1.0000000 1.0000000 4.2404103 1.0000000 0.2571604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 1.0000000 1.0000000 1.0000000 1.0000000 0.3336052 1.0000000 0.2119390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 0.8990583 1.0375079</span>
<span class="r-in"><span><span class="fu">wt_atu</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = atu}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 1.0000000 0.3686554 1.0000000 1.0000000 0.1731942 6.3289497 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 0.2285990 0.8479233 1.0000000 1.0000000 1.0000000 0.5574953 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 1.0000000 0.2197205 1.0000000 6.4823626 1.0000000 0.1579396 0.2320863</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 0.5284847 0.6329051 0.1167996 0.6011153 1.0000000 0.8682760 0.7381824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 1.0000000 1.0000000 0.1488715 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 1.0736701 1.0000000 2.6613092 1.8205180 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 1.0000000 1.0000000 3.5054016 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 0.2718404 1.0000000 1.0000000 0.3529239 1.0000000 0.8222956 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 1.0000000 0.4231912 0.2254357 1.0000000 0.5820478 1.0000000 1.4559422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 1.0000000 0.3302967 1.0000000 0.3368064 0.3334905 0.3596676 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 0.4213022 0.6573389 1.0000000 1.0000000 1.0822347 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 0.6942927 1.6216558 1.0000000 2.3910308 0.5761821 1.3035242 0.3688192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 1.0000000 1.0000000 0.1261698 0.2278362 1.0000000 3.1659355 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 0.6064733 1.6679958 0.5989600 1.8066347 1.0000000 0.3777228 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 1.0000000 1.0000000</span>
<span class="r-in"><span><span class="fu">wt_atm</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = atm}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 0.4926755 0.3686554 0.7457538 1.0000000 0.1731942 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 0.2285990 0.8479233 0.8701789 1.0000000 0.8610445 0.5574953 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 0.2230018 0.2197205 0.4222125 1.0000000 0.5682254 0.1579396 0.2320863</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 0.5284847 0.6329051 0.1167996 0.6011153 1.0000000 0.8682760 0.7381824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 0.4955011 0.2782671 0.1488715 1.0000000 1.0000000 1.0000000 0.1359647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 1.0000000 1.0000000 1.0000000 1.0000000 0.3991897 0.2726533 0.7594392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 0.7574058 0.6531012 1.0000000 0.2674992 0.4013989 0.8967053 0.4551341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 0.2718404 0.1582988 0.8306973 0.3529239 0.2461361 0.8222956 0.3609610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 0.2531726 0.4231912 0.2254357 0.6654737 0.5820478 0.2134045 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 0.4695226 0.3302967 0.8477904 0.3368064 0.3334905 0.3596676 0.8243692</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 0.4213022 0.6573389 1.0000000 0.1117285 1.0000000 0.3813969 0.6774393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 0.6942927 1.0000000 0.2329063 1.0000000 0.5761821 1.0000000 0.3688192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 0.2229300 0.8113126 0.1261698 0.2278362 1.0000000 1.0000000 0.2571604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 0.6064733 1.0000000 0.5989600 1.0000000 0.3336052 0.3777228 0.2119390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 0.8990583 1.0000000</span>
<span class="r-in"><span><span class="fu">wt_ato</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ato}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 0.3300620 0.2693559 0.4271815 0.8064139 0.1476262 0.8635548 0.5224844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 0.1860648 0.4588520 0.4652918 0.8654667 0.4626673 0.3579435 0.5581067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 0.1823397 0.1801400 0.2968702 0.8663524 0.3623366 0.1363971 0.1883685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 0.3457573 0.3875945 0.1045842 0.3754354 0.6668244 0.4647472 0.4246864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 0.3313278 0.2176909 0.1295806 0.8218392 0.6525642 0.7363739 0.1196909</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 0.5177632 0.7067676 0.7268737 0.6454552 0.2853006 0.2142400 0.4316371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 0.4309795 0.3950764 0.7780442 0.2110449 0.2864273 0.4727700 0.3127781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 0.2137378 0.1366649 0.4537601 0.2608601 0.1975194 0.4512416 0.2652251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 0.2020253 0.2973537 0.1839637 0.3995702 0.3679078 0.1758725 0.5928243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 0.3195069 0.2482880 0.4588131 0.2519485 0.2500884 0.2645261 0.4518654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 0.2964199 0.3966231 0.6681459 0.1004998 0.5197467 0.2760951 0.4038532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 0.4097832 0.6185617 0.1889083 0.7051044 0.3655555 0.5658826 0.2694433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 0.1822917 0.4479142 0.1120344 0.1855591 0.8091752 0.7599579 0.2045566</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 0.3775185 0.6251868 0.3745935 0.6437014 0.2501529 0.2741646 0.1748760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 0.4734232 0.5092044</span>
<span class="r-in"><span><span class="fu">wt_entropy</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = entropy}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 0.9466884 0.7974021 1.1914845 2.5383087 0.4910630 2.9202760 1.4494516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 0.5903003 1.2746181 1.2917997 2.9354392 1.2847853 1.0158386 1.5532690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 0.5808315 0.5752272 0.8649741 2.9425314 1.0267968 0.4612870 0.5961433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 0.9855373 1.0902253 0.3741728 1.0595945 1.9101181 1.2903427 1.1850225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 0.9498151 0.6697735 0.4429918 2.6301699 1.8588898 2.1880067 0.4161138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 1.4360497 2.0632803 2.1467853 1.8339424 0.8365617 0.6611694 1.2030532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 1.2013433 1.1091726 2.3850345 0.6531902 0.8393281 1.3118818 0.9040828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 0.6599161 0.4620024 1.2611029 0.7765170 0.6192602 1.2544407 0.7872501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 0.6305931 0.8661618 0.5849629 1.1205924 1.0407229 0.5643262 1.6597604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 0.9206519 0.7455600 1.2745145 0.7545814 0.7499980 0.7855318 1.2560894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 0.8638679 1.1130997 1.9149498 0.3626234 1.4416708 0.8139569 1.1315051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 1.1466626 1.7427820 0.5975110 2.0565825 1.0348389 1.5766261 0.7976169</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 0.5807093 1.2456605 0.3950015 0.5890166 2.5542633 2.2959657 0.6369461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 1.0648287 1.7647932 1.0574806 1.8278454 0.7501570 0.8092153 0.5617751</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 1.3136430 1.4119476</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Stabilized ATE weights (reduces variance)</span></span></span>
<span class="r-in"><span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span>, stabilize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate; stabilized}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 0.7612645 0.6706411 0.8903344 2.6344870 0.5748651 3.5911853 1.0680279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [8] 0.6020135 0.9054824 0.9537912 3.7908823 0.9491327 0.7631727 1.1541248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [15] 0.6237309 0.5976630 0.7253284 3.6663577 0.7997950 0.5673904 0.6037223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [22] 0.7489575 0.8001235 0.5472318 0.7845465 1.5307242 0.9154552 0.8517094</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [29] 0.7627055 0.6519162 0.5629470 2.8625831 1.4678972 1.9345583 0.5793420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [36] 1.0160984 1.7392350 1.7940415 1.3820538 0.7135867 0.6490532 0.8973140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [43] 0.8962770 0.8430816 2.2076468 0.6464246 0.7147134 0.9673197 0.7421184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [50] 0.6232018 0.5907324 0.9336556 0.6629327 0.6355294 0.8929248 0.6940901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 0.6391180 0.6973637 0.6004635 0.8493916 0.7752034 0.6188363 1.2034117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [64] 0.7494566 0.6518454 0.9423731 0.6550351 0.6534103 0.6662371 0.9304283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [71] 0.6964381 0.8120960 1.5368200 0.5669815 1.0202950 0.7045124 0.8554940</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [78] 0.8302034 1.2846113 0.6287822 1.6616051 0.7723292 1.1287269 0.6707214</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [85] 0.6236943 0.9237694 0.5518232 0.6016397 2.6726093 2.0413084 0.6411518</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [92] 0.7871719 1.3073180 0.7834904 1.3752510 0.6801387 0.6750841 0.6180889</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [99] 0.9685198 1.0391291</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Inspect the result</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps</span>, <span class="va">trt</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-in"><span><span class="fu"><a href="psw.html">estimand</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ate"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.112   1.317   1.591   2.044   2.047   7.482 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -- Overlap-focused estimands handle extreme PS better --------------</span></span></span>
<span class="r-in"><span><span class="va">ps_extreme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.98</span>, <span class="fl">0.99</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trt_extreme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps_extreme</span>, <span class="va">trt_extreme</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu">wt_ato</span><span class="op">(</span><span class="va">ps_extreme</span>, <span class="va">trt_extreme</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -- From a fitted GLM -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">0.5</span> <span class="op">*</span> <span class="va">x1</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> <span class="va">x2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ps_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">trt2</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exposure is extracted from the model automatically</span></span></span>
<span class="r-in"><span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps_model</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Using exposure variable <span style="color: #0000BB;">"trt2"</span> from GLM model</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[100]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 1.772299 2.816364 1.919886 2.059945 1.590514 2.019637 1.592626 3.675866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [9] 1.731064 1.526937 2.194737 1.585679 1.604308 2.035997 1.836701 3.038426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [17] 1.926720 2.527851 2.956648 1.456686 1.951071 2.308830 2.122857 1.859348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [25] 1.333779 1.789153 2.089527 2.008161 1.809376 1.845397 1.236823 2.436497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [33] 1.817852 2.352419 1.300776 1.637110 3.144659 2.924006 4.687625 1.406029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [41] 2.396310 2.163061 2.510037 1.356974 1.430312 2.334509 3.102993 2.202745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [49] 1.310198 1.607962 2.624988 2.535210 1.793952 1.647484 2.569296 2.061068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [57] 3.046296 1.936586 1.517183 1.624578 2.826262 2.825176 1.554039 1.098856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [65] 1.637046 1.507218 2.581387 1.554926 2.385541 1.698365 1.811373 1.670399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [73] 1.760472 1.365580 1.911171 1.539045 2.208360 1.724933 1.617692 1.874702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [81] 1.406166 3.813823 1.982021 2.553269 1.982884 1.957207 1.440986 1.560568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [89] 1.603633 1.885138 1.584638 2.218637 1.630055 1.585865 1.872610 1.274698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [97] 1.393716 1.394134 1.800220 1.778728</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -- Data frame input ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">ps_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  treated <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.7</span>, <span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">exposure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps_df</span>, <span class="va">exposure</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.111111 1.428571 1.428571 1.111111</span>
<span class="r-in"><span><span class="fu">wt_ate</span><span class="op">(</span><span class="va">ps_df</span>, <span class="va">exposure</span>, .propensity_col <span class="op">=</span> <span class="st">"treated"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.111111 1.428571 1.428571 1.111111</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -- Censoring weights -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">cens_ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">0.6</span>, <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cens_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">1</span>, <span class="va">cens_ps</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">wt_cens</span><span class="op">(</span><span class="va">cens_ps</span>, <span class="va">cens_ind</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = uncensored}[50]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1.116412 1.447081 1.644465 1.108844 1.394494 1.217840 1.263824 3.727943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] 1.503634 1.333104 1.218367 1.278290 1.203561 1.169213 1.298047 1.361360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] 1.660049 1.663092 1.054599 2.760604 3.945306 1.174730 1.162941 1.104729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 1.230385 1.156509 1.115406 1.227788 1.139434 2.551015 1.340626 1.103498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] 1.209817 1.082758 2.943590 1.407391 1.134443 1.056929 1.402849 2.502609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] 1.055677 1.533923 1.620017 1.235981 3.477837 1.274250 1.138436 1.602240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] 1.185878 1.072937</span>
<span class="r-in"><span><span class="fu"><a href="psw.html">estimand</a></span><span class="op">(</span><span class="fu">wt_cens</span><span class="op">(</span><span class="va">cens_ps</span>, <span class="va">cens_ind</span><span class="op">)</span><span class="op">)</span>  <span class="co"># "uncensored"</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Treating `.exposure` as binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Setting focal level to <span style="color: #0000BB;">1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "uncensored"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Malcolm Barrett.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

