<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Propensity Score Weight Vectors — psw • propensity</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Propensity Score Weight Vectors — psw"><meta name="description" content="psw objects are numeric vectors that carry metadata about propensity score
weights, including the target estimand and whether the underlying propensity
scores were trimmed, truncated, or calibrated.
Most users will encounter psw objects as return values from wt_ate() and
related weight functions. These constructor and helper functions are useful
for inspecting weight objects or for package developers extending propensity."><meta property="og:description" content="psw objects are numeric vectors that carry metadata about propensity score
weights, including the target estimand and whether the underlying propensity
scores were trimmed, truncated, or calibrated.
Most users will encounter psw objects as return values from wt_ate() and
related weight functions. These constructor and helper functions are useful
for inspecting weight objects or for package developers extending propensity."><meta property="og:image" content="https://r-causal.github.io/propensity/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">propensity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/propensity.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-causal/propensity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Propensity Score Weight Vectors</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-causal/propensity/blob/main/R/psw.R" class="external-link"><code>R/psw.R</code></a></small>
      <div class="d-none name"><code>psw.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>psw</code> objects are numeric vectors that carry metadata about propensity score
weights, including the target estimand and whether the underlying propensity
scores were trimmed, truncated, or calibrated.</p>
<p>Most users will encounter <code>psw</code> objects as return values from <code><a href="wt_ate.html">wt_ate()</a></code> and
related weight functions. These constructor and helper functions are useful
for inspecting weight objects or for package developers extending propensity.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_psw</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  estimand <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilized <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trimmed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  truncated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calibrated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">psw</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  estimand <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stabilized <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trimmed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  truncated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calibrated <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_psw</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_stabilized</span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_causal_wt</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_psw</span><span class="op">(</span><span class="va">x</span>, estimand <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">estimand</span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">estimand</span><span class="op">(</span><span class="va">wt</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>For <code>psw()</code> and <code>new_psw()</code>: a numeric vector of weights
(default: <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double()</a></code>). For <code>is_psw()</code>, <code>is_causal_wt()</code>, and <code>as_psw()</code>:
an object to test or coerce.</p></dd>


<dt id="arg-estimand">estimand<a class="anchor" aria-label="anchor" href="#arg-estimand"></a></dt>
<dd><p>A character string identifying the target estimand (e.g.,
<code>"ate"</code>, <code>"att"</code>, <code>"ato"</code>). Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-stabilized">stabilized<a class="anchor" aria-label="anchor" href="#arg-stabilized"></a></dt>
<dd><p>Logical. Were the weights stabilized? Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-trimmed">trimmed<a class="anchor" aria-label="anchor" href="#arg-trimmed"></a></dt>
<dd><p>Logical. Were the weights derived from trimmed propensity
scores? Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-truncated">truncated<a class="anchor" aria-label="anchor" href="#arg-truncated"></a></dt>
<dd><p>Logical. Were the weights derived from truncated propensity
scores? Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-calibrated">calibrated<a class="anchor" aria-label="anchor" href="#arg-calibrated"></a></dt>
<dd><p>Logical. Were the weights derived from calibrated
propensity scores? Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional attributes stored on the object (developer use only).</p></dd>


<dt id="arg-wt">wt<a class="anchor" aria-label="anchor" href="#arg-wt"></a></dt>
<dd><p>A <code>psw</code> or <code>causal_wts</code> object.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>A character string: the new estimand to assign.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p><code>new_psw()</code>, <code>psw()</code>, <code>as_psw()</code>: A <code>psw</code> vector.</p></li>
<li><p><code>is_psw()</code>, <code>is_causal_wt()</code>, <code>is_stabilized()</code>: A single logical value.</p></li>
<li><p><code>estimand()</code>: A character string, or <code>NULL</code> if no estimand is set.</p></li>
<li><p><code>estimand&lt;-</code>: The modified <code>psw</code> object (called for its side effect).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="constructors">Constructors<a class="anchor" aria-label="anchor" href="#constructors"></a></h3>

<ul><li><p><code>psw()</code> is the <strong>user-facing</strong> constructor. It coerces <code>x</code> to double and
validates inputs before creating the object.</p></li>
<li><p><code>new_psw()</code> is the <strong>low-level</strong> constructor intended for developers. It
assumes <code>x</code> is already a double vector and performs minimal validation.</p></li>
<li><p><code>as_psw()</code> coerces an existing numeric vector to a <code>psw</code> object.</p></li>
</ul></div>

<div class="section">
<h3 id="queries">Queries<a class="anchor" aria-label="anchor" href="#queries"></a></h3>

<ul><li><p><code>is_psw()</code> tests whether an object is a <code>psw</code> vector.</p></li>
<li><p><code>is_causal_wt()</code> tests whether an object inherits from the broader
<code>causal_wts</code> class (which includes <code>psw</code> objects).</p></li>
<li><p><code>estimand()</code> and <code>estimand&lt;-</code> get and set the estimand attribute.</p></li>
<li><p><code>is_stabilized()</code> returns <code>TRUE</code> if the weights are stabilized.</p></li>
</ul></div>

<div class="section">
<h3 id="arithmetic-and-combining">Arithmetic and combining<a class="anchor" aria-label="anchor" href="#arithmetic-and-combining"></a></h3>


<p>Arithmetic operations on <code>psw</code> objects preserve the class and attributes,
so operations like normalization (<code>weights / sum(weights)</code>) retain metadata.
Combining <code>psw</code> objects with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> preserves the class only when all
metadata matches; mismatched metadata produces a warning and falls back to a
plain numeric vector.</p>
<p>Subsetting with <code>[</code> preserves class and attributes. Summary functions
(<code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>, etc.) return plain numeric values.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="wt_ate.html">wt_ate()</a></code>, <code><a href="wt_ate.html">wt_att()</a></code>, <code><a href="wt_ate.html">wt_atu()</a></code>, <code><a href="wt_ate.html">wt_atm()</a></code>, <code><a href="wt_ate.html">wt_ato()</a></code> for
calculating propensity score weights (which return <code>psw</code> objects).</p>
<p><code><a href="ps_trim.html">ps_trim()</a></code>, <code><a href="ps_trunc.html">ps_trunc()</a></code>, and <code><a href="ps_calibrate.html">ps_calibrate()</a></code> for modifying propensity
scores before weight calculation.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create psw objects directly</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu">psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">0.8</span>, <span class="fl">1.5</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"ate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">w</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[3]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.2 0.8 1.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Query metadata</span></span></span>
<span class="r-in"><span><span class="fu">is_psw</span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">estimand</span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ate"</span>
<span class="r-in"><span><span class="fu">is_stabilized</span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Coerce a plain numeric vector</span></span></span>
<span class="r-in"><span><span class="fu">as_psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fl">2.0</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"att"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = att}[2]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Arithmetic preserves the psw class</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[3]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3428571 0.2285714 0.4285714</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combining: compatible metadata is preserved</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">0.8</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"ate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">0.9</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"ate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;psw{estimand = ate}[4]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.2 0.8 1.1 0.9</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combining: incompatible metadata warns and returns numeric</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">0.8</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"ate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">psw</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">0.9</span><span class="op">)</span>, estimand <span class="op">=</span> <span class="st">"att"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Converting psw to numeric: incompatible estimands 'ate' and 'att'</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Metadata cannot be preserved when combining incompatible objects</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Use identical objects or explicitly cast to numeric to avoid this warning</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.2 0.8 1.1 0.9</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Malcolm Barrett.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

